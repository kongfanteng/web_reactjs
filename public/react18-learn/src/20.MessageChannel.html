<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const messageChannel = new MessageChannel()
      const channel = {
        port1: messageChannel.port1,
        port2: messageChannel.port2,
      }
      const { port1, port2 } = channel
      // 在 port1 上监听 port2 发过来的消息
      port1.onmessage = function (e) {
        console.log(`port1 接收到了来自 port2 的数据 {${e.data}}`)
      }
      // 通过 port2 向 port1 发送消息
      port2.postMessage('发送给 port1 的数据')
    </script>
  </body>
</html>
